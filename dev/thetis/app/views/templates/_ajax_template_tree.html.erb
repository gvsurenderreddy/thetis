<% unless @tmpl_tree.nil? %>

<script type="text/javascript">

  var array = new Array(
  <%
  is_first = true
  @tmpl_tree.each do |parent_id, childs|
  %>
    <% unless is_first %>
    ,
    <% end %>
                    new Array("<%= parent_id %>", " <%= Item.get_title(parent_id) %>", "")
  <%
    is_first = false
  end
  %>
                  );

  <% item_img = THETIS_RELATIVE_URL_ROOT + '/images/item.gif' %>
  var firstMenuId = ThetisBox.buildTree("", array, null, "<%= params[:rootDiv] %>", "<%= params[:selKeeper] %>", "<%= item_img %>");

  <% if params[:selId].nil? or params[:selId].empty? %>
    ThetisBox.selectTree("<%= params[:selKeeper] %>", firstMenuId, null);
  <% else %>
    ThetisBox.selectTree("<%= params[:selKeeper] %>", "<%= params[:selId] %>", null);
  <% end %>
</script>

<% end %>
