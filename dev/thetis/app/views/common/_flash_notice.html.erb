<% unless flash[:notice].blank? %>

<% if flash[:notice].starts_with?('ERROR:') %>
<!-- $FLASH_NOTICE:ERROR -->
<% end %>

<script type="text/javascript">
<%
if flash[:notice].starts_with?('ERROR:')
  msg = flash[:notice]['ERROR:'.length .. -1].gsub("\n", '<br/>')
%>
  setTimeout("try{ msg(\"<%= raw(msg) %>\"); }catch(e){}", 100);
<%
else
  msg = flash[:notice].gsub("\n", '<br/>')
%>
  setTimeout("try{ tips(\"<%= raw(msg) %>\"); }catch(e){}", 100);
<% end  %>
</script>

<% end %>

<% flash[:notice] = nil %>
