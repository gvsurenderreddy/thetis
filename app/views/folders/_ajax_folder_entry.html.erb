<%
unless @folder.nil?
  div_id = 'folderTree:' + @folder.id.to_s

  @folders_cache ||= {}
  @folder_obj_cache ||= {}
%>

<div id="base_<%= div_id %>" nowrap style="padding:0px; display:inline;">
  <%
  div_id = 'folderTree:' + @folder.id.to_s
  menu_id = 'a_' + div_id
  selKeeper_id = 'selKeeper'
  %>
  <a id="<%= menu_id %>" value="" href="javaScript:selectFolder('<%= @folder.id %>'); if (_z('<%= selKeeper_id %>').value == '<%= menu_id %>') { ThetisBox.toggleTree('<%= div_id %>'); } ThetisBox.selectTree('<%= selKeeper_id %>', '<%= menu_id %>', null)">
    <%
    icons = @folder.get_icons
    folder_open = icons[1]
    folder_close = icons[2]
    %>
    <img id="<%= div_id %>_open" src="<%= folder_open %>" border="0"><img id="<%= div_id %>_close" src="<%= folder_close %>" border="0" style="display:none;">
    <span id="<%= div_id %>_name"><%= @folder.name %></span>
  </a><br/>
  <div id="<%= div_id %>" class="thetisBoxTreeBlock" style="padding-left:30px; border-left:1px dotted navy;"></div>
</div>
<span id="path_<%= @folder.id %>" style="display:none;"><%= @folder.get_path(@folders_cache, @folder_obj_cache) %></span>
<span id="xtype_<%= @folder.id %>" style="display:none;"><%= @folder.xtype %></span>

<% end %>
